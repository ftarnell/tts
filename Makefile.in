VPATH		= @top_srcdir@

CC		= @CC@
# _GNU_SOURCE is required for wcsdup() on older version of glibc that don't
# implement XPG7.
CPPFLAGS	= @CPPFLAGS@ -D_XOPEN_SOURCE=700 -D_XOPEN_SOURCE_EXTENDED -D__EXTENSIONS__
CFLAGS		= @CFLAGS@ -I@top_srcdir@ -I@top_builddir@
LDFLAGS		= @LDFLAGS@
LIBS		= @LIBS@
INSTALL		= @INSTALL@

OBJS		= tts.o wide.o entry.o ui.o functions.o commands.o bindings.o str.o

prefix		= @prefix@
exec_prefix	= @exec_prefix@
bindir		= @bindir@

tts: ${OBJS} vers.o
	${CC} ${CFLAGS} ${LDFLAGS} ${OBJS} vers.o -o tts ${LIBS} @CURSES_LIB@

install:
	${INSTALL} -d -m 0755 ${bindir}
	${INSTALL} -c -m 0755 tts ${bindir}

.c.o:
	${CC} ${CPPFLAGS} ${CFLAGS} -c $<

vers.c: vers.c.sh configure.ac
	sh @top_srcdir@/vers.c.sh @top_srcdir@/configure.ac

clean:
	rm -f tts *.o
